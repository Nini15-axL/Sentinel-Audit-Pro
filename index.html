<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sentinel Audit Pro</title>
<style>
* { box-sizing: border-box; }
body { font-family: Arial, sans-serif; background-color: #f4f4f5; margin:0; padding:0; color:#0B1E3F; }
header { background-color:#1A73E8; color:white; padding:40px 20px; text-align:center; }
h1 { margin:0; font-size:2.5em; }
h2 { color:#FF9500; margin-bottom:15px; }
section { padding:20px; max-width:800px; margin:0 auto; }
.pack, .abonnement { border:2px solid #1A73E8; border-radius:10px; padding:20px; margin:20px 0; background:white; }
label { display:block; margin:10px 0 5px; }
input, select { width:100%; padding:8px; margin-bottom:15px; border-radius:5px; border:1px solid #ccc; }
button { background-color:#30D158; color:white; border:none; padding:15px 25px; font-size:1em; border-radius:5px; cursor:pointer; width:100%; }
button:hover { background-color:#28a745; }
footer { text-align:center; padding:20px; font-size:0.9em; color:#555; }
</style>
<script src="https://js.stripe.com/v3/"></script>
</head>
<body>

<header>
<h1>Sentinel Audit Pro</h1>
<p>Audit cybersécurité rapide et complet pour petites entreprises et freelances</p>
</header>

<section>
<h2>Nos Packs</h2>
<div class="pack">
<h3>Pack Express</h3>
<p>Audit rapide (vulnérabilités basiques, SSL, CMS) + PDF résumé</p>
<p><strong>Prix : 250 €</strong></p>
</div>
<div class="pack">
<h3>Pack Pro</h3>
<p>Audit complet 360° (réseau, ports, SSL, DNS, CMS) + PDF détaillé + plan priorisé</p>
<p><strong>Prix : 500 €</strong></p>
</div>

<h2>Abonnement Premier</h2>
<div class="abonnement" id="abonnementContainer" style="display:none;">
<label for="abonnement">Choisir votre niveau :</label>
<select id="abonnement">
<option value="">-- Sélectionner --</option>
<option value="premier_250">Rapport PDF + plan priorisé – 250 €/mois</option>
<option value="premier_300">Session de débriefing personnalisée – 300 €/mois</option>
<option value="premier_500">Protection continue – 500 €/mois</option>
<option value="premier_900">Abonnement complet – 900 €/mois</option>
</select>
</div>
</section>

<section>
<h2>Commander votre audit</h2>
<form id="auditForm">
<label for="name">Nom / Entreprise</label>
<input type="text" id="name" name="name" required>

<label for="email">Email</label>
<input type="email" id="email" name="email" required>

<label for="domain">Domaine / Site Web</label>
<input type="text" id="domain" name="domain" required>

<label for="pack">Choix du Pack / Abonnement</label>
<select id="pack" name="pack" required>
<option value="">-- Sélectionner --</option>
<option value="express">Pack Express – 250 € (paiement unique)</option>
<option value="pro">Pack Pro – 500 € (paiement unique)</option>
<option value="premier">Pack Premier – abonnement</option>
</select>

<button type="button" id="payButton">Lancer mon audit</button>
</form>

<div id="confirmation" style="display:none; margin-top:20px;">
<h2>Merci !</h2>
<p>Votre audit Sentinel Audit Pro est en cours. Vous recevrez votre rapport PDF sous 24h.</p>
</div>
</section>

<footer>
&copy; 2025 Sentinel Audit Pro. Tous droits réservés.
</footer>

<script>
// Clé publique Stripe
const stripe = Stripe("pk_test_xxx");

// Afficher le menu abonnement uniquement si Pack Premier est choisi
const packSelect = document.getElementById('pack');
const abonnementContainer = document.getElementById('abonnementContainer');

packSelect.addEventListener('change', function(){
    if(this.value === 'premier') {
        abonnementContainer.style.display = 'block';
    } else {
        abonnementContainer.style.display = 'none';
        document.getElementById('abonnement').value = '';
    }
});

// Gestion du paiement
document.getElementById('payButton').addEventListener('click', function() {
    const selectedPack = packSelect.value;
    const abonnementLevel = document.getElementById('abonnement').value;

    let priceId = '';
    if(selectedPack === 'express') priceId = 'price_express';
    else if(selectedPack === 'pro') priceId = 'price_pro';
    else if(selectedPack === 'premier') {
        if(!abonnementLevel){ alert('Choisissez un niveau pour Pack Premier'); return; }
        const mapping = {
            'premier_250': 'price_premier_250',
            'premier_300': 'price_premier_300',
            'premier_500': 'price_premier_500',
            'premier_900': 'price_premier_900'
        };
        priceId = mapping[abonnementLevel];
    } else { alert('Choisissez un pack'); return; }

    const mode = (selectedPack === 'premier') ? 'subscription' : 'payment';

    stripe.redirectToCheckout({
        lineItems: [{ price: priceId, quantity: 1 }],
        mode: mode,
        successUrl: window.location.href + "?success=true",
        cancelUrl: window.location.href + "?cancel=true",
        customerEmail: document.getElementById('email').value
    }).then(function(result){
        if(result.error) alert(result.error.message);
    });
});

// Afficher confirmation après paiement réussi
if(window.location.search.includes('success=true')){
    document.getElementById('auditForm').style.display = 'none';
    document.getElementById('confirmation').style.display = 'block';
}
</script>

</body>
</html>
